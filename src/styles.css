:root {
  /* Brawl Stars inspired: bold, vivid, friendly */
  --bg: #0b1840; /* deep indigo */
  --bg-grad: radial-gradient(1200px 700px at 10% 0%, rgba(53,96,230,0.25) 0%, rgba(53,96,230,0) 60%),
              radial-gradient(900px 500px at 90% 20%, rgba(255,193,37,0.18) 0%, rgba(255,193,37,0) 60%),
              linear-gradient(180deg, #0c1a45 0%, #0a1535 100%);
  --panel: #13235c; /* card navy */
  --panel-edge: #243679; /* edge */
  --text: #f7fbff; /* near white */
  --muted: #a8b9e6;
  --primary: #ffc107; /* brawl yellow */
  --accent: #4ad1ff; /* cyan accent */
  --danger: #ff4d6d;
  --shadow: 0 18px 40px rgba(0,0,0,0.35), inset 0 2px 0 rgba(255,255,255,0.12);
}

* { box-sizing: border-box; }
body { margin: 0; font-family: Inter, system-ui, Arial, sans-serif; background: var(--bg); color: var(--text); background-image: var(--bg-grad); }

.container { max-width: 1100px; margin: 0 auto; padding: 24px; }
.container.fullheight { min-height: 100vh; display: grid; place-items: center; }
.app-header h1 { margin: 0 0 4px; font-size: 26px; }
.subtitle { margin: 0; color: var(--muted); }
.topbar { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
.selection { display: flex; align-items: center; gap: 10px; }
.chip { background: linear-gradient(180deg, #1a2c6a 0%, #13235c 100%); border: 2px solid #2b3f86; color: var(--accent); padding: 6px 12px; border-radius: 999px; box-shadow: var(--shadow); font-weight: 700; }
.seg { display:flex; background: #0f1e4e; border: 2px solid #2b3f86; border-radius: 999px; overflow:hidden; box-shadow: var(--shadow); }
.seg-btn { color: var(--muted); background: transparent; padding: 8px 14px; border: none; cursor: pointer; font-weight: 800; letter-spacing: 0.3px; }
.seg-btn.active { background: linear-gradient(180deg, #ffcf3f 0%, #ffb300 100%); color: #2d1a00; }

.controls { margin: 18px 0 8px; display: flex; gap: 12px; align-items: end; flex-wrap: wrap; }
.controls.solo-upload { justify-content: flex-end; }
.type-selector label { margin-right: 8px; color: var(--muted); }
.type-selector select { padding: 8px 10px; border-radius: 8px; border: 1px solid var(--panel-edge); background: var(--panel); color: var(--text); }

.upload-panel { display: none; }
.file-label { display: flex; justify-content: space-between; align-items: center; gap: 12px; }
.file-label input[type=file] { width: 60%; }
.hint { margin: 6px 0 0; color: var(--muted); font-size: 12px; }
.status { margin: 6px 0 0; color: var(--accent); font-size: 13px; }

.summary { margin: 10px 0 16px; color: var(--muted); font-weight: 700; }

.exercise-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 16px; }
.exercise { background: linear-gradient(180deg, #1a2c6a 0%, #13235c 100%); border: 2px solid #2b3f86; border-radius: 20px; padding: 16px; box-shadow: var(--shadow); }
.exercise-header { display: flex; align-items: center; gap: 10px; }
.badge { background: linear-gradient(180deg, #2e469c 0%, #20336f 100%); color: var(--accent); border: 2px solid #2b3f86; padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 900; box-shadow: var(--shadow); text-transform: uppercase; }
.question { margin: 4px 0 4px; font-size: 16px; line-height: 1.4; }
.verbs { margin-top: 6px; color: var(--muted); }
.examples { margin-top: 6px; }
.examples ul { margin: 6px 0 0; padding-left: 18px; }
.examples li { margin: 4px 0; }

.recorder { margin-top: 10px; border-top: 1px dashed #2a355b; padding-top: 10px; }
.rec-controls { display: flex; align-items: center; gap: 10px; }
.btn { border: 2px solid #2b3f86; background: linear-gradient(180deg, #2640a8 0%, #1c3286 100%); color: #fefefe; padding: 12px 16px; border-radius: 16px; cursor: pointer; box-shadow: var(--shadow); transition: transform .12s ease, filter .12s ease, box-shadow .12s ease; font-weight: 900; }
.btn:hover { filter: brightness(1.05); transform: translateY(-2px); }
.btn.primary { background: linear-gradient(180deg, #ffcf3f 0%, #ffb300 100%); border-color: #ffcf3f; color: #2d1a00; }
/*.btn.pulse { animation: pulse 1.2s ease-in-out infinite; }*/
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(107,123,255,0.35);} 70% { box-shadow: 0 0 0 12px rgba(107,123,255,0);} 100% { box-shadow: 0 0 0 0 rgba(107,123,255,0);} }
.btn.link { text-decoration: none; display: inline-block; }
.timer { color: var(--muted); }
.timer.active { color: var(--accent); font-weight: 600; }
.limit { color: var(--muted); }
.error { color: var(--danger); }

.footer { margin-top: 22px; color: var(--muted); font-size: 13px; }

.empty { color: var(--muted); }

/* Splash */
.splash { width: 100%; display: grid; place-items: center; }
.splash-inner { width: 100%; max-width: 980px; padding: 28px; background: rgba(19,35,92,0.6); border: 2px solid #2b3f86; border-radius: 26px; box-shadow: var(--shadow); backdrop-filter: blur(8px); }
.splash-title { margin: 4px 0 12px; font-size: 28px; letter-spacing: 0.3px; }
.splash-sub { margin: 0 0 12px; color: var(--muted); font-weight: 800; }
.card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px; }
.choice-card { text-align: left; border: 2px solid #2b3f86; background: linear-gradient(180deg, #2640a8 0%, #1c3286 100%); color: var(--text); padding: 18px; border-radius: 20px; cursor: pointer; box-shadow: var(--shadow); transition: transform .15s ease, filter .15s ease, border-color .15s ease; }
.choice-card:hover { transform: translateY(-2px); filter: brightness(1.05); }
.choice-card.active { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(255,193,7,0.35), var(--shadow); }
.choice-title { font-size: 16px; font-weight: 600; }
.choice-meta { margin-top: 6px; color: var(--muted); font-size: 12px; }
.splash-actions { margin-top: 18px; display: flex; justify-content: flex-end; gap: 10px; }

/* No emoji visuals in neutral theme */

/* Accordion */
.accordion { display: grid; gap: 14px; }
.acc-section { border: 2px solid #2b3f86; border-radius: 20px; background: linear-gradient(180deg, #1a2c6a 0%, #13235c 100%); box-shadow: var(--shadow); overflow: hidden; }
.acc-header { width: 100%; display: grid; grid-template-columns: 1fr auto 24px; align-items: center; text-align: left; gap: 12px; padding: 18px 20px; background: linear-gradient(180deg, #2640a8 0%, #1c3286 100%); border-bottom: 2px solid #2b3f86; }
.acc-title { font-weight: 700; }
.acc-meta { color: var(--muted); font-size: 13px; }
.acc-icon { transform: rotate(0deg); transition: transform .15s ease; color: var(--accent); }
.acc-section.open .acc-icon { transform: rotate(180deg); }
.acc-panel { padding: 10px 12px 16px; }
.acc-list { list-style: none; margin: 0; padding: 0; }
.acc-item { width: 100%; text-align: left; padding: 12px 12px; border-radius: 14px; border: 2px solid transparent; background: linear-gradient(180deg, #1b2d6d 0%, #152457 100%); cursor: pointer; transition: background .12s ease, transform .12s ease, border-color .12s ease; box-shadow: var(--shadow); color: var(--text); }
.acc-item:hover { transform: translateX(2px) translateY(-1px); border-color: var(--panel-edge); }
.acc-item-title { font-weight: 600; }
.acc-item-sub { display: block; color: var(--muted); font-size: 12px; margin-top: 2px; }

/* Detail */
.detail { background: linear-gradient(180deg, #1a2c6a 0%, #13235c 100%); border: 2px solid #2b3f86; border-radius: 22px; box-shadow: var(--shadow); }
.detail-header { padding: 18px; border-bottom: 2px solid #2b3f86; background: linear-gradient(180deg, #2640a8 0%, #1c3286 100%); }
.detail-badges { display: flex; gap: 8px; margin-bottom: 8px; }
.detail-title { margin: 4px 0; }
.detail-question { margin: 0; color: var(--muted); }
.detail-actions { margin-top: 12px; }
.detail-body { padding: 16px; }
.detail-recorder { margin-top: 12px; }

/* Recorder */
.rec-controls { gap: 12px; }
.timer { font-weight: 900; background: linear-gradient(180deg, #2640a8 0%, #1c3286 100%); padding: 6px 10px; border-radius: 999px; border: 2px solid #2b3f86; box-shadow: var(--shadow); color: var(--primary); }
.timer.active { color: var(--accent); }
.transcript { margin-top: 10px; padding: 12px; border: 2px solid #2b3f86; border-radius: 16px; background: linear-gradient(180deg, #1b2d6d 0%, #152457 100%); box-shadow: var(--shadow); }
.transcript .label { color: var(--muted); font-size: 12px; margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
.transcript .text { font-size: 14px; line-height: 1.4; }
/* Writing */
.writing { display: grid; gap: 10px; }
.writing-bar { display: flex; align-items: center; gap: 10px; }
.writing-progress { display: grid; gap: 6px; }
.writing-progress .bar { height: 10px; border-radius: 999px; border: 2px solid #2b3f86; background: #0f1e4e; overflow: hidden; box-shadow: var(--shadow); }
.writing-progress .bar .fill { height: 100%; background: linear-gradient(90deg, #ffcf3f 0%, #ff6bb3 50%, #4ad1ff 100%); }
.writing-area { width: 100%; min-height: 220px; resize: vertical; padding: 14px; border-radius: 16px; border: 2px solid #2b3f86; background: linear-gradient(180deg, #1b2d6d 0%, #152457 100%); box-shadow: var(--shadow); color: var(--text); font-weight: 600; }
.wc { margin-left: auto; display: flex; align-items: center; gap: 8px; color: var(--muted); }
.wc-count { font-weight: 900; color: var(--primary); }
.wc-min.ok { color: #2a7a4b; }
.wc-target.near { color: #ffd166; text-decoration: underline; }
